<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Kubeflow使用Kubernetes进行机器学习 | xigang's home</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Kubeflow使用Kubernetes进行机器学习</h1><a id="logo" href="/.">xigang's home</a><p class="description">Do it right or don't do it at all</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Kubeflow使用Kubernetes进行机器学习</h1><div class="post-meta">Dec 8, 2018<span> | </span><span class="category"><a href="/categories/机器学习/">机器学习</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>Kubeflow是Google推出的基于kubernetes环境下的机器学习组件，通过Kubeflow可以实现对TFJob等资源类型定义，可以像部署应用一样完成在TFJob分布式训练模型的过程。最初的设计是将Kubernetes和Tensorflow结合实现对Tensorflow分布式训练的支持。但是仅仅实现对Tensorflow的支持还是远远不够的，<code>Kubeflow</code>社区又陆续对各种深度学习框架进行支持,例如:<code>MXNet</code>, <code>Caffee</code>, <code>PyTorch</code>等。使得机器学习算法同学只需关心算法实现，而后续的模型训练和服务上线都交给平台来做,解放算法同学使其专做自己擅长的事儿。</p>
<p>在继续介绍<code>Kubeflow</code>之前, 先简单介绍下真正的机器学习模型服务上线都需要经历哪些阶段，如下图所示:</p>
<p><div align="left"><br><img src="http://p4.qhimg.com/t01a5666fe3e10fbe55.png" width="800" height="330" alt="kubeflow"></div></p>
<p><code>注意:上图的每种颜色代表对一个阶段的处理</code></p>
<p>从上图可以看出一个机器学习模型上线对外提供服务要经过:<code>数据清洗验证</code>，<code>数据集切分</code>， <code>训练</code>，<code>构建验证模型</code>， <code>大规模训练</code>,<code>模型导出</code>，<code>模型服务上线</code>， <code>日志监控</code>等阶段。Tensorflow 等计算框架解决了最核心的部分问题，但是距离生产化，产品化，以及企业级机器学习项目开发，还有一段距离。比如: <code>数据收集</code>， <code>数据清洗</code>， <code>特征提取</code>， <code>计算资源管理</code>， <code>模型服务</code>， <code>配置管理</code>， <code>存储</code>， <code>监控</code>， <code>日志</code>等等。</p>
<p><div align="left"><br><img src="http://p7.qhimg.com/t0181ef91a0097b1be4.png" width="800" height="280" alt="kubeflow"></div></p>
<p>好了机器学习服务上线的基本流程介绍之后，接下来继续介绍Kubeflow.</p>
<h3 id="Kubeflow核心组件介绍"><a href="#Kubeflow核心组件介绍" class="headerlink" title="Kubeflow核心组件介绍"></a>Kubeflow核心组件介绍</h3><ul>
<li><a href="http://jupyter.org/" target="_blank" rel="noopener">jupyter</a> 多租户NoteBook服务</li>
<li><a href="http://jupyter.org/" target="_blank" rel="noopener">Tensorflow</a> <a href="https://pytorch.org/" target="_blank" rel="noopener">PyTorch</a> <a href="https://www.open-mpi.org/" target="_blank" rel="noopener">MPI</a> <a href="https://mxnet.apache.org/" target="_blank" rel="noopener">MXnet</a> <a href="https://chainer.org/" target="_blank" rel="noopener">Chainer</a> 当前主要支持的机器学习引擎</li>
<li><a href="https://github.com/SeldonIO/seldon-core">Seldon</a> 提供在Kubernetes上对机器学习模型的部署</li>
<li><a href="https://www.tensorflow.org/serving/" target="_blank" rel="noopener">TF-Serving</a> 提供对Tensorflow模型的在线部署，支持版本控制及无需停止线上服务，切换模型等功能</li>
<li><a href="https://argoproj.github.io/" target="_blank" rel="noopener">Argo</a> 基于Kubernetes的工作流引擎</li>
<li><a href="https://www.getambassador.io/" target="_blank" rel="noopener">Ambassador</a> 对外提供统一服务的网关(API Gateway)</li>
<li><a href="https://istio.io/" target="_blank" rel="noopener">Istio</a> 提供微服务的管理，Telemetry收集</li>
<li><a href="https://ksonnet.io/" target="_blank" rel="noopener">Ksonnet</a> Kubeflow使用ksonnet来向kubernetes集群部署需要的k8s资源</li>
</ul>
<p>而Kubeflow利用Kubernetes的优势:</p>
<ul>
<li>原生的资源隔离</li>
<li>集群化自动化管理</li>
<li>计算资源(CPU/GPU)自动调度</li>
<li>对多种分布式存储的支持</li>
<li>集成较为成熟的监控，告警</li>
</ul>
<p>将机器学习各个阶段涉及的组件已微服务的方式进行组合并已容器化的方式进行部署，提供整个流程各个系统的高可用及方便的进行扩展。</p>
<p><div align="left"><br><img src="http://p1.qhimg.com/t014480177078b5c1fa.png" width="800" height="330" alt="kubeflow"></div></p>
<h3 id="Kubeflow-部署安装"><a href="#Kubeflow-部署安装" class="headerlink" title="Kubeflow 部署安装"></a>Kubeflow 部署安装</h3><h4 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h4><p>硬件环境<br>服务器配置:</p>
<ul>
<li>GPU卡型号: Nvidia-Tesla-K80</li>
<li>网卡: 千兆(注意:在进行对大数据集进行训练时，千兆的网卡会是瓶颈)</li>
</ul>
<p>cephfs服务配置:</p>
<ul>
<li>网卡：万兆(注意:通过ceph对数据存储时，ceph集群需要与Kubernetes同机房，否则延迟会对加载数据集的影响非常高)</li>
</ul>
<p><code>注意：服务器的GPU驱动和Nvidia-docker2.0的部署安装之前介绍过，这里就不介绍了。</code></p>
<p>软件环境:</p>
<ul>
<li>kubernetes version: v1.12.2(注意: 需要安装kube-dns)</li>
<li>kubeflow version: v0.3.2</li>
<li>jsonnet version: v0.11.2</li>
</ul>
<h4 id="Kubeflow-安装"><a href="#Kubeflow-安装" class="headerlink" title="Kubeflow 安装"></a>Kubeflow 安装</h4><ul>
<li>安装<a href="https://ksonnet.io/" target="_blank" rel="noopener">ksonnet</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KS_VER=0.11.2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KS_PKG=ks_<span class="variable">$&#123;KS_VER&#125;</span>_linux_amd64</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget -O /tmp/<span class="variable">$&#123;KS_PKG&#125;</span>.tar.gz https://github.com/ksonnet/ksonnet/releases/download/v<span class="variable">$&#123;KS_VER&#125;</span>/<span class="variable">$&#123;KS_PKG&#125;</span>.tar.gz \</span></span><br><span class="line">  --no-check-certificate</span><br><span class="line">  </span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -p <span class="variable">$&#123;HOME&#125;</span>/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -xvf /tmp/<span class="variable">$KS_PKG</span>.tar.gz -C <span class="variable">$&#123;HOME&#125;</span>/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$&#123;HOME&#125;</span>/bin/<span class="variable">$KS_PKG</span></span></span><br></pre></td></tr></table></figure>
<p>关于<code>ksonnet</code>的更多信息请查看官网:<a href="https://ksonnet.io/" target="_blank" rel="noopener">https://ksonnet.io/</a></p>
<ul>
<li>安装Kubeflow</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KUBEFLOW_SRC=/home/wangxigang/kubeflow</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir <span class="variable">$&#123;KUBEFLOW_SRC&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> <span class="variable">$&#123;KUBEFLOW_SRC&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KUBEFLOW_TAG=v0.3.2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> curl https://raw.githubusercontent.com/kubeflow/kubeflow/<span class="variable">$&#123;KUBEFLOW_TAG&#125;</span>/scripts/download.sh | bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KUBEFLOW_REPO=/home/wangxigang/kubeflow/scripts</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> KFAPP=/home/wangxigang/kubeflow/kubeflow_ks_app</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="variable">$&#123;KUBEFLOW_REPO&#125;</span>/scripts/kfctl.sh init <span class="variable">$&#123;KFAPP&#125;</span> --platform none</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> <span class="variable">$&#123;KFAPP&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="variable">$&#123;KUBEFLOW_REPO&#125;</span>/scripts/kfctl.sh generate k8s</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="variable">$&#123;KUBEFLOW_REPO&#125;</span>/scripts/kfctl.sh apply k8s</span></span><br></pre></td></tr></table></figure>
<p>关于<code>kubeflow</code>的更多信息请查看官网:<a href="https://v0-3.kubeflow.org/docs/started/getting-started/" target="_blank" rel="noopener">https://v0-3.kubeflow.org/docs/started/getting-started/</a></p>
<p>当上面的所有安装步骤都正常完成之后，先查看kubeflow在kubernetes集群deployment资源对象的启动状态:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost]# kubectl  get deployment -n kubeflow</span><br><span class="line">NAME                                     DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">ambassador                               <span class="number">3</span>         <span class="number">3</span>         <span class="number">3</span>            <span class="number">3</span>           <span class="number">11</span>d</span><br><span class="line">argo-ui                                  <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">centraldashboard                         <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">modeldb-backend                          <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">modeldb-db                               <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">modeldb-frontend                         <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">mxnet-operator                           <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">spartakus-volunteer                      <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">studyjob-controller                      <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">tf-job-dashboard                         <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">tf-job-operator-v1alpha2                 <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-core                              <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-db                                <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-suggestion-bayesianoptimization   <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-suggestion-grid                   <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-suggestion-hyperband              <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">vizier-suggestion-random                 <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br><span class="line">workflow-controller                      <span class="number">1</span>         <span class="number">1</span>         <span class="number">1</span>            <span class="number">1</span>           <span class="number">11</span>d</span><br></pre></td></tr></table></figure>
<p>ok,通过状态我们发现现在服务启动正常,在查看下各个deployment下各个服务的pod的状态:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost]# kubectl  get pods -n kubeflow</span><br><span class="line">NAME                                                      READY   STATUS    RESTARTS   AGE</span><br><span class="line">ambassador-c97f7b448<span class="number">-8</span>qgbg                                <span class="number">3</span>/<span class="number">3</span>     Running   <span class="number">1</span>          <span class="number">8</span>d</span><br><span class="line">ambassador-c97f7b448-bspqt                                <span class="number">3</span>/<span class="number">3</span>     Running   <span class="number">1</span>          <span class="number">8</span>d</span><br><span class="line">ambassador-c97f7b448-vq6mn                                <span class="number">3</span>/<span class="number">3</span>     Running   <span class="number">1</span>          <span class="number">8</span>d</span><br><span class="line">argo-ui<span class="number">-7495</span>b79b59-b2hlg                                  <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">centraldashboard<span class="number">-798</span>f8d68d5-gxx4g                         <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">modeldb-backend-d69695b66-dxr44                           <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">modeldb-db<span class="number">-975</span>db58f7-wshd4                                <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">modeldb-frontend<span class="number">-78</span>ccff78b7-xr7h7                         <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">mxnet-operator<span class="number">-6</span>c49b767bc-nj995                           <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">19</span>         <span class="number">8</span>d</span><br><span class="line">spartakus-volunteer<span class="number">-94</span>bbd5c86<span class="number">-7</span>xmfd                       <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">studyjob-controller<span class="number">-7</span>df5754ddf-pqqgt                      <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">tf-hub<span class="number">-0</span>                                                  <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">tf-job-dashboard<span class="number">-7499</span>d5cbcf-cct2q                         <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">tf-job-operator-v1alpha2<span class="number">-644</span>c5f7db7-v5qzc                 <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">vizier-core<span class="number">-56</span>dfc85cf9-qdrnt                              <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">973</span>        <span class="number">8</span>d</span><br><span class="line">vizier-db<span class="number">-6</span>bd6c6fdd5-h549q                                <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">11</span>d</span><br><span class="line">vizier-suggestion-bayesianoptimization<span class="number">-5</span>d5bc5685c-x89lm   <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">vizier-suggestion-grid<span class="number">-5</span>dbfc65587-vv4gs                   <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">vizier-suggestion-hyperband<span class="number">-5</span>d9997fb99-hr9pj              <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">vizier-suggestion-random<span class="number">-7</span>fccb79977<span class="number">-5</span>mggb                 <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br><span class="line">workflow-controller-d5cb6468d<span class="number">-29</span>kmf                       <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">8</span>d</span><br></pre></td></tr></table></figure>
<p>ok,现在服务都是正常的,接下来让我们通过<code>Ambassador</code>来访问kubeflow部署到k8s集群中的各个组件。</p>
<p><code>注意: 由于官方默认使用的镜像都是google镜像仓库的，所以在部署时可能出现墙的问题</code></p>
<h3 id="访问Kubeflow-UIs"><a href="#访问Kubeflow-UIs" class="headerlink" title="访问Kubeflow UIs"></a>访问Kubeflow UIs</h3><p>由于Kubeflow使用<a href="https://www.getambassador.io/" target="_blank" rel="noopener">Ambassador</a>作为kubeflow统一的对外网关，其它的内部服务都是通过使用它来对外提供服务。具体如下图所示:</p>
<p><div align="left"><br><img src="http://p0.qhimg.com/t017de4641447b6e11a.png" width="800" height="330" alt="kubeflow"></div></p>
<p>接下来我们使用<code>kubectl</code>的<code>port-forwarding</code>来对<code>Ambassador Service</code>进行端口转发，在本地对Kubeflow进行访问:</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">export</span> NAMESPACE=kubeflow</span><br><span class="line"># kubectl --kubeconfig /etc/kubernetes/kubeconfig port-forward -n $&#123;NAMESPACE&#125; `kubectl --kubeconfig /etc/kubernetes/kubeconfig get pods -n $&#123;NAMESPACE&#125; --selector=service=ambassador -o jsonpath=<span class="string">'&#123;.items[0].metadata.name&#125;'</span>` <span class="number">8080</span>:<span class="number">80</span></span><br><span class="line">Forwarding <span class="keyword">from</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span> -&gt; <span class="number">80</span></span><br><span class="line">Forwarding <span class="keyword">from</span> [::<span class="number">1</span>]:<span class="number">8080</span> -&gt; <span class="number">80</span></span><br></pre></td></tr></table></figure>
<p>通过浏览器进行本地<code>localhost:8080</code>访问:</p>
<p><div align="left"><br><img src="http://p3.qhimg.com/t01a39704b056adc1cf.png" width="800" height="330" alt="kubeflow"></div></p>
<p>通过Kubeflow UIs可以针对不同的功能进行使用，如使用<code>Jupyter Notebook</code>进行对应用的全过程计算：开发、文档编写、运行代码和展示结果。</p>
<p><div align="left"><br><img src="http://p8.qhimg.com/t01b39bf2c7ebe231c3.png" width="800" height="280" alt="kubeflow"></div></p>
<p>通过Kubeflow UIs访问<code>TF-operator</code>来对基于<code>Tensorflow</code>的模型进行多机多卡的分布式训练。</p>
<p><div align="left"><br><img src="http://p0.qhimg.com/t01eb582ed91bdc7287.png" width="800" height="330" alt="kubeflow"></div></p>
<p>好了，这篇文章简单的介绍了<code>Kubeflow</code>及其安装流程，关于文章介绍的服务组件太多，需要自行去深入了解了，就不详细介绍了。在接下来的文章会介绍基于kubeflow对<code>Tensorflow</code>和<code>MXNet</code>模型进行多机多卡的分布式训练。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>现在国外的Google,微软，亚马逊，Intel以及国内的阿里云，华为云，小米云，京东云, 才云等等公司都在发力Kubeflow，并结合kubernetes对多种机器学习引擎进行多机多卡的大规模训练，这样可以做到对GPU资源的整合，并高效的提高GPU资源利用率，及模型训练的效率。并实现一站式服务，将机器学习服务上线的整个workflow都在Kubernetes平台实现。减轻机器学习算法同学的其它学习成本，专心搞算法。这势必给Devops的同学带来更高的跳挑战。相信未来Kubeflow会发展的更好。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://stevenwhang.com/tfx_paper.pdf" target="_blank" rel="noopener">http://stevenwhang.com/tfx_paper.pdf</a></li>
<li><a href="https://www.kubeflow.org/" target="_blank" rel="noopener">https://www.kubeflow.org/</a></li>
<li><a href="https://opensource.com/article/18/6/kubeflow" target="_blank" rel="noopener">https://opensource.com/article/18/6/kubeflow</a></li>
<li><a href="https://www.oliverwyman.com/content/dam/oliver-wyman/v2/events/2018/March/Google_London_Event/Public%20Introduction%20to%20Kubeflow.pdf" target="_blank" rel="noopener">https://www.oliverwyman.com/content/dam/oliver-wyman/v2/events/2018/March/Google_London_Event/Public%20Introduction%20to%20Kubeflow.pdf</a></li>
</ul>
</div><div class="tags"><a href="/tags/kubernetes/">kubernetes</a><a href="/tags/kubeflow/">kubeflow</a></div><div class="post-nav"><a class="pre" href="/2018/12/14/prometheus/">记一次InfoQ采访 &lt;&lt;360容器平台监控实践&gt;&gt;</a><a class="next" href="/2018/11/24/kube-dns/">Kubernetes DNS 介绍</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '86d1945e3a9358946043',
  clientSecret: '304f48ee3394ae5dab75d19a966506e170d850f6',
  repo: 'xigang.github.io',
  owner: 'xigang',
  admin: ['xigang'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://github.com/xigang"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/etcd/">etcd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kubernetes/">kubernetes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/microservices/">microservices</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/日志监控/">日志监控</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/etcd/" style="font-size: 15px;">etcd</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/prometheus/" style="font-size: 15px;">prometheus</a> <a href="/tags/kapacitor/" style="font-size: 15px;">kapacitor</a> <a href="/tags/alertmanager/" style="font-size: 15px;">alertmanager</a> <a href="/tags/bosun/" style="font-size: 15px;">bosun</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/cgroup/" style="font-size: 15px;">cgroup</a> <a href="/tags/kernel/" style="font-size: 15px;">kernel</a> <a href="/tags/ceph/" style="font-size: 15px;">ceph</a> <a href="/tags/kubeflow/" style="font-size: 15px;">kubeflow</a> <a href="/tags/scheduler/" style="font-size: 15px;">scheduler</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/microservices/" style="font-size: 15px;">microservices</a> <a href="/tags/ipvs/" style="font-size: 15px;">ipvs</a> <a href="/tags/iptables/" style="font-size: 15px;">iptables</a> <a href="/tags/netfilter/" style="font-size: 15px;">netfilter</a> <a href="/tags/mxnet/" style="font-size: 15px;">mxnet</a> <a href="/tags/tensorflow/" style="font-size: 15px;">tensorflow</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/07/21/kubernetes-service/">浅谈Kubernetes Service负载均衡实现机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/01/cgroupv2/">CGROUPS VERSION 2</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/11/bosun/">Prometheus基于bosun框架进行告警</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/09/container-resource-metrics/">A Deep Dive Into Kubernetes Metrics - Container Resource Metrics</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/15/metrics-servere/">Kubernetes Metrics-Server介绍及源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/17/gang-scheduler/">适合AI场景的调度器 - Gang-Schedule</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/30/tensorflow/">Tensorflow结合kubeflow进行分布式训练</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/17/mxnet/">MXNet结合kubeflow进行分布式训练</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/31/Orphaned-pod/">定位 Orphaned Pod Found - but Volume Paths Are Still Present on Disk 问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/14/prometheus/">记一次InfoQ采访 <<360容器平台监控实践>></a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://gogap.cn/" title="gogap" target="_blank">gogap</a><ul></ul><a href="http://www.0x7c00.net/" title="31744" target="_blank">31744</a><ul></ul><a href="https://www.opsdev.cn/" title="360opsdev" target="_blank">360opsdev</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">xigang's home.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>